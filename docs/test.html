<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skin Wallet - Test Page</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        .success { background: #d4edda; border-color: #c3e6cb; }
        .error { background: #f8d7da; border-color: #f5c6cb; }
    </style>
</head>
<body>
    <h1>Skin Wallet - Web Interface Test</h1>
    
    <div class="test-section">
        <h2>Browser Compatibility</h2>
        <p><strong>User Agent:</strong> <span id="user-agent"></span></p>
        <p><strong>JavaScript:</strong> <span id="js-status">✅ Enabled</span></p>
        <p><strong>Local Storage:</strong> <span id="storage-status">Testing...</span></p>
    </div>
    
    <div class="test-section">
        <h2>External Dependencies</h2>
        <p><strong>Pyodide CDN:</strong> <span id="pyodide-status">Testing...</span></p>
        <p><strong>QR Code Library:</strong> <span id="qrcode-status">Testing...</span></p>
    </div>
    
    <div class="test-section">
        <h2>File Structure</h2>
        <ul id="file-list">
            <li>Loading...</li>
        </ul>
    </div>
    
    <div class="test-section">
        <h2>Quick Test</h2>
        <button onclick="runQuickTest()">Run Encryption Test</button>
        <div id="test-result"></div>
    </div>
    
    <script>
        // Test browser compatibility
        document.getElementById('user-agent').textContent = navigator.userAgent;
        
        // Test local storage
        try {
            localStorage.setItem('test', 'test');
            localStorage.removeItem('test');
            document.getElementById('storage-status').textContent = '✅ Available';
        } catch (e) {
            document.getElementById('storage-status').textContent = '❌ Not Available';
        }
        
        // Test external dependencies
        function testDependencies() {
            // Test Pyodide
            if (typeof loadPyodide !== 'undefined') {
                document.getElementById('pyodide-status').textContent = '✅ Available';
            } else {
                document.getElementById('pyodide-status').textContent = '❌ Not Loaded';
            }
            
            // Test QR Code
            if (typeof QRCode !== 'undefined') {
                document.getElementById('qrcode-status').textContent = '✅ Available';
            } else {
                document.getElementById('qrcode-status').textContent = '❌ Not Loaded';
            }
        }
        
        // Test file structure
        async function testFiles() {
            const files = ['index.html', 'styles.css', 'app.js'];
            const fileList = document.getElementById('file-list');
            fileList.innerHTML = '';
            
            for (const file of files) {
                const li = document.createElement('li');
                try {
                    const response = await fetch(file);
                    if (response.ok) {
                        li.textContent = `✅ ${file} - Available`;
                    } else {
                        li.textContent = `❌ ${file} - Not Found`;
                    }
                } catch (e) {
                    li.textContent = `❌ ${file} - Error`;
                }
                fileList.appendChild(li);
            }
        }
        
        // Quick encryption test
        async function runQuickTest() {
            const resultDiv = document.getElementById('test-result');
            resultDiv.innerHTML = '<p>Running test...</p>';
            
            try {
                // Simple test without Pyodide
                const testWord = 'TEST';
                const testKey = [1, 2, 3, 4];
                
                // Manual Vigenère cipher implementation
                const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                let result = '';
                
                for (let i = 0; i < testWord.length; i++) {
                    const letter = testWord[i].toUpperCase();
                    const shift = testKey[i % testKey.length];
                    const pos = letters.indexOf(letter);
                    const newPos = (pos + shift) % 26;
                    result += letters[newPos];
                }
                
                const expected = 'UGVX';
                const success = result === expected;
                
                resultDiv.innerHTML = `
                    <div class="${success ? 'success' : 'error'}">
                        <p><strong>Test Word:</strong> ${testWord}</p>
                        <p><strong>Key:</strong> [${testKey.join(', ')}]</p>
                        <p><strong>Result:</strong> ${result}</p>
                        <p><strong>Expected:</strong> ${expected}</p>
                        <p><strong>Status:</strong> ${success ? '✅ PASS' : '❌ FAIL'}</p>
                    </div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">❌ Test failed: ${error.message}</div>`;
            }
        }
        
        // Initialize tests
        window.addEventListener('load', function() {
            setTimeout(testDependencies, 1000);
            testFiles();
        });
    </script>
</body>
</html> 